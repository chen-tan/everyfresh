(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d3588dd"],{"12ea":function(t,e,a){"use strict";a("1c24")},"1c24":function(t,e,a){},"7db0":function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").find,c=a("44d2"),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),c(i)},9201:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-list"},[a("search-list",{attrs:{searchForm:t.searchForm},on:{"search-submit":t.searchSubmit}}),a("product-table",{attrs:{tableData:t.tableData},on:{"product-edit":t.productEdit,"product-delete":t.productDelete}})],1)},n=[],c=a("1da1"),i=a("5530"),o=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-table",{attrs:{columns:t.columns,"data-source":t.renderData,scroll:{y:440}},scopedSlots:t._u([{key:"operate",fn:function(e,r){return a("div",{},[a("a-button",{on:{click:function(a){return t.productEdit(e,r)}}},[t._v("编辑")]),a("a-button",{on:{click:function(a){return t.productDelete(e,r)}}},[t._v("删除")])],1)}}])})}),s=[],u=(a("d81d"),a("7db0"),a("b0c0"),a("2f62")),d=a("365c"),l=[{title:"名称",dataIndex:"c_item",key:"c_item"},{title:"类目",dataIndex:"categoryName",key:"categoryName",ellipsis:!0},{title:"标签",dataIndex:"tags",key:"tags",ellipsis:!0},{title:"价格",dataIndex:"price",key:"price",ellipsis:!0},{title:"折扣价",dataIndex:"price_off",key:"price_off",ellipsis:!0},{title:"单位",dataIndex:"unit",key:"unit",ellipsis:!0},{title:"上架状态",dataIndex:"status",key:"status",ellipsis:!0},{title:"商品库存量",dataIndex:"inventory",key:"inventory",ellipsis:!0},{title:"描述",dataIndex:"desc",key:"desc",ellipsis:!0},{title:"操作",dataIndex:"operate",key:"operate",align:"center",width:180,scopedSlots:{customRender:"operate"}}],p={props:{tableData:{type:Array,require:!0}},data:function(){return{columns:l}},computed:Object(i["a"])(Object(i["a"])({},Object(u["b"])("categoryList",["data"])),{},{renderData:function(){var t=this.data;return this.tableData.map((function(e){var a=t.find((function(t){return e.category===t.id}));return Object(i["a"])(Object(i["a"])({},e),{},{key:e.id,categoryName:a.name})}))}}),methods:{productEdit:function(t,e){this.$emit("product-edit",e)},productDelete:function(t,e){this.$emit("product-delete",e)}}},m=p,h=(a("ce1a"),a("2877")),f=Object(h["a"])(m,o,s,!1,null,"ecc7440c",null),b=f.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form-model",{attrs:{layout:"inline",model:t.searchForm},on:{submit:t.handleSubmit},nativeOn:{submit:function(t){t.preventDefault()}}},[a("a-form-model-item",[a("a-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.searchForm.searchWord,callback:function(e){t.$set(t.searchForm,"searchWord",e)},expression:"searchForm.searchWord"}})],1),t.categoryList.length?a("a-form-model-item",{attrs:{label:"类别",prop:"category"}},[[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择商品类目",allowClear:!0},on:{change:t.handleChange}},t._l(t.categoryList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)]],2):t._e(),a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 搜索 ")])],1),a("a-button",{staticClass:"to-product-add"},[a("router-link",{attrs:{to:{name:"ProductAdd"}}},[t._v("添加商品")])],1)],1)},g=[],v={props:{searchForm:{type:Object,require:!0}},data:function(){return{categoryList:[]}},watch:{"$store.state.categoryList.data":{immediate:!0,handler:function(){var t=this.$store.state.categoryList.data;t&&(this.categoryList=t)}}},methods:{handleSubmit:function(){this.$emit("search-submit",this.searchForm)},handleChange:function(t){this.searchForm.category=t}},created:function(){this.$store.dispatch("categoryList/getCategoryList")}},k=v,x=(a("12ea"),Object(h["a"])(k,y,g,!1,null,"4fbf6686",null)),w=x.exports,_={components:{SearchList:w,ProductTable:b},data:function(){return{tableData:[],searchForm:{searchWord:"",category:""}}},computed:Object(i["a"])({},Object(u["b"])("categoryList",["data"])),methods:{searchSubmit:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.searchForm=t,e.getTableData();case 2:case"end":return a.stop()}}),a)})))()},getTableData:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getProductsList(Object(i["a"])({},t.searchForm));case 2:a=e.sent,"success"===a.status&&(t.tableData=a.data.data);case 4:case"end":return e.stop()}}),e)})))()},productEdit:function(t){this.$router.push({name:"ProductEdit",params:{id:t.id}})},productDelete:function(t){var e=this;this.$confirm({title:"确认删除吗？",content:"确认删除title为".concat(t.title,"的商品吗？"),okText:"是",okType:"danger",cancelText:"否",onOk:function(){var a=Object(c["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d["a"].delete(t.id);case 2:r=a.sent,"success"===r.status&&(alert("成功删除title为".concat(t.title,"的商品")),e.getTableData());case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}(),onCancel:function(){}})}},created:function(){this.getTableData()}},D=_,O=Object(h["a"])(D,r,n,!1,null,null,null);e["default"]=O.exports},ce1a:function(t,e,a){"use strict";a("d3cd")},d3cd:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7d3588dd.06f18ccb.js.map