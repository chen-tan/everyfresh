(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-768ae83c"],{"0741":function(e,t,r){},"1f35":function(e,t,r){"use strict";r("a3c0")},"46b1":function(e,t,r){"use strict";r("9aab")},"7db0":function(e,t,r){"use strict";var a=r("23e7"),i=r("b727").find,s=r("44d2"),n="find",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s(n)},"9aab":function(e,t,r){},a3c0:function(e,t,r){},e312:function(e,t,r){"use strict";r("0741")},ed8a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-add"},[r("a-steps",{staticClass:"steps-container",attrs:{current:e.current}},e._l(e.steps,(function(e){return r("a-step",{key:e.title,attrs:{title:e.title}})})),1),r("div",{staticClass:"steps-content"},[0===e.current?r("basic-detail",e._b({attrs:{form:e.form},on:{next:e.next}},"basic-detail",e.text,!1)):e._e(),1===e.current?r("sale-detail",{attrs:{form:e.form},on:{prev:e.prev,submit:e.submit}}):e._e()],1)],1)},i=[],s=r("2909"),n=r("1da1"),o=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"basic-detail"},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,labelCol:{span:5},wrapperCol:{span:14}}},[r("a-form-model-item",{ref:"title",attrs:{label:"副标题",prop:"title",required:""}},[r("a-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("a-form-model-item",{attrs:{label:"商品描述",prop:"desc"}},[r("a-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("a-form-model-item",{attrs:{label:"商品类目",prop:"category"}},[r("a-select",{attrs:{placeholder:"请选择商品类目",allowClear:""},on:{change:e.handleChange},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",e._n(t))},expression:"form.category"}},e._l(e.categoryList,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),r("a-select",{attrs:{placeholder:"请选择商品子类目",allowClear:""},model:{value:e.form.c_item,callback:function(t){e.$set(e.form,"c_item",t)},expression:"form.c_item"}},e._l(e.categoryItems,(function(t){return r("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),r("a-form-model-item",{ref:"tags",attrs:{label:"商品标签",prop:"tags",required:""}},[r("a-select",{attrs:{mode:"tags",placeholder:"请选择商品标签","default-value":["包邮，最晚次日达"]},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},[r("a-select-option",{attrs:{value:"包邮，最晚次日达"}},[e._v(" 包邮，最晚次日达 ")])],1)],1),r("div",{staticClass:"btn-group"},[r("a-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v(" 下一步 ")]),r("a-button",{on:{click:e.resetForm}},[e._v(" 重置 ")])],1)],1)],1)}),c=[],l=(r("7db0"),{props:{form:{type:Object,require:!0}},created:function(){},data:function(){return{categoryItems:[],rules:{title:[{required:!0,message:"请输入标题",trigger:"change"}],desc:[{required:!0,message:"请输入商品描述",trigger:"change"}],category:[{required:!0,message:"请选择商品类目",trigger:"change"}],c_items:[{required:!0,message:"请选择商品子类目",trigger:"change"}]}}},methods:{next:function(){var e=this;this.$refs.ruleForm.validate((function(t){return t?(e.$emit("next"),!0):(console.log("error submit!!"),!1)}))},resetForm:function(){this.$refs.ruleForm.resetFields()},handleChange:function(e){this.categoryItems=this.categoryList.find((function(t){return t.id===e}))["c_items"]}},computed:{categoryList:function(){return this.$store.state.categoryList.data||this.$store.dispatch("categoryList/getCategoryList"),this.$store.state.categoryList.data}}}),u=l,m=(r("46b1"),r("2877")),f=Object(m["a"])(u,o,c,!1,null,"649e19da",null),p=f.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sale-detail"},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,labelCol:{span:5},wrapperCol:{span:14}}},[r("a-form-model-item",{ref:"price",attrs:{label:"商品售价",prop:"price",required:""}},[r("a-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}})],1),r("a-form-model-item",{ref:"price_off",attrs:{label:"商品折扣价",prop:"price_off"}},[r("a-input",{model:{value:e.form.price_off,callback:function(t){e.$set(e.form,"price_off",e._n(t))},expression:"form.price_off"}})],1),r("a-form-model-item",{ref:"inventory",attrs:{label:"商品库存",prop:"inventory",required:""}},[r("a-input",{model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",e._n(t))},expression:"form.inventory"}})],1),r("a-form-model-item",{ref:"unit",attrs:{label:"计量单位",prop:"unit",required:""}},[r("a-input",{model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),r("a-form-model-item",{attrs:{wrapperCol:{span:19}}},[r("div",{staticClass:"clearfix img-upload"},[r("a-upload",{attrs:{action:"https://mallapi.duyiedu.com/upload/images?appkey="+e.$store.state.loginUser.data.appkey,"list-type":"picture-card","file-list":e.fileList,name:"avatar"},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<8?r("div",[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v("上传")])],1):e._e()]),r("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[r("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)]),r("div",{staticClass:"btn-group"},[r("a-button",{on:{click:e.prev}},[e._v(" 上一步 ")]),r("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交 ")]),r("a-button",{on:{click:e.resetForm}},[e._v(" 重置 ")])],1)],1)],1)},g=[];r("d3b7"),r("4de4"),r("d81d");function h(e){return new Promise((function(t,r){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return r(e)}}))}var v={props:{form:{type:Object,require:!0}},data:function(){return{previewVisible:!1,previewImage:"",images:[],fileList:[],rules:{price:[{required:!0,type:"number",message:"请输入价格",trigger:"change"}],inventory:[{required:!0,type:"number",message:"请输入商品库存",trigger:"change"}],unit:[{required:!0,message:"请输入商品计量单位",trigger:"change"}]}}},methods:{prev:function(){this.$emit("prev")},submit:function(){var e=this;this.$refs.ruleForm.validate((function(t){return t?(e.$emit("submit",e.images),!0):(console.log("error submit!!"),!1)}))},resetForm:function(){this.$refs.ruleForm.resetFields()},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.url||e.preview){r.next=4;break}return r.next=3,h(e.originFileObj);case 3:e.preview=r.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return r.stop()}}),r)})))()},handleChange:function(e){var t=e.file,r=e.fileList;if("done"===t.status)"success"===t.response.status&&this.images.push(t.response.data.url);else if("removed"===t.status)if(t.response){var a=t.response.data.url;this.images=this.images.filter((function(e){return e!==a}))}else{var i=t.url;this.images=this.images.filter((function(e){return e!==i}))}this.fileList=r}},computed:{categoryList:function(){return this.$store.state.categoryList.data||this.$store.dispatch("categoryList/getCategoryList"),this.$store.state.categoryList.data}},created:function(){this.form.images.length&&(this.images=Object(s["a"])(this.form.images),this.fileList=this.form.images.map((function(e,t){return{uid:t,name:"image".concat(t,".png"),status:"done",url:e}})))}},b=v,y=(r("e312"),Object(m["a"])(b,d,g,!1,null,"f8ebc73a",null)),_=y.exports,w=r("365c"),x={components:{BasicDetail:p,SaleDetail:_},data:function(){return{current:0,steps:[{title:"填写商品基本信息"},{title:"填写商品销售信息"}],form:{title:"",desc:"",category:0,c_item:[],tags:[],price:0,price_off:0,inventory:0,unit:"",images:[]},text:{a:1,b:"haha",c:{d:"obj"}}}},methods:{next:function(){this.current++},prev:function(){this.current--},submit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.$route.params.id){r.next=8;break}return t.form.images=Object(s["a"])(e),r.next=4,w["a"].editProduct(t.form);case 4:a=r.sent,"success"===a.status?t.$router.push({name:"ProductList"}):alert("添加失败，请检查商品信息是否填写正确"),r.next=13;break;case 8:return t.form.images=Object(s["a"])(e),r.next=11,w["a"].add(t.form);case 11:i=r.sent,"success"===i.status?t.$router.push({name:"ProductList"}):alert("添加失败，请检查商品信息是否填写正确");case 13:case"end":return r.stop()}}),r)})))()}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.params.id,!r){t.next=8;break}return t.next=4,w["a"].detail(r);case 4:a=t.sent,"success"===a.status&&(e.form=a.data),t.next=8;break;case 8:case"end":return t.stop()}}),t)})))()}},k=x,$=(r("1f35"),Object(m["a"])(k,a,i,!1,null,"15e6dba2",null));t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-768ae83c.0e80173b.js.map